<div class="max-w-4xl mx-auto bg-white rounded-lg shadow-sm">
  <div class="p-6 border-b border-gray-200">
    <h1 class="text-2xl font-bold text-gray-800">Registrar Pago</h1>
    <p class="text-gray-600 mt-1">> Registro de pago del estudiante</p>
  </div>

  <form class="p-6 space-y-4 bg-white rounded-lg shadow"
        [formGroup]="pagoForm"
        (ngSubmit)="onSubmitPago()">

    <!-- Estudiante -->
    <div>
      <label class="block text-gray-700 font-semibold mb-1">Estudiante:</label>
      <p-dropdown
        [options]="estudiantes"
        optionLabel="estudiante.nombre"
        optionValue="id"
        formControlName="estudianteId"
        class="w-full"
        placeholder="Seleccione un estudiante"
        filter="true"
        filterPlaceholder="Buscar por nombre...">
      </p-dropdown>
    </div>

    <div *ngIf="estudianteSeleccionado" class="p-4 mt-4 bg-gray-50 rounded-md shadow-inner space-y-2 border border-gray-200">
      <h2 class="text-lg font-semibold text-gray-800 mb-2">Información del estudiante</h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-700">
        <div><strong>Nombre:</strong> {{ estudianteSeleccionado.estudiante.nombre }}</div>
        <div><strong>Estado:</strong> {{ estudianteSeleccionado.estado }}</div>
        <div><strong>Curso:</strong> {{ estudianteSeleccionado.curso.nombre }}</div>
        <div><strong>Modalidad:</strong> {{ estudianteSeleccionado.curso.modalidad }}</div>
        <div><strong>Duración:</strong> {{ estudianteSeleccionado.curso.duracionMeses | tiempoMeses }}</div>
        <div><strong>Turno:</strong> {{ estudianteSeleccionado.horario.turno }}</div>
        <div><strong>Horario:</strong> {{ estudianteSeleccionado.horario.horaInicio }} - {{estudianteSeleccionado.horario.horaFin}}</div>
        <div><strong>Fecha de inicio de clases:</strong> {{ estudianteSeleccionado.fechaInicio | date:'longDate' }}</div>
      </div>

        <div class="mt-6">
          <h3 class="font-semibold text-gray-700 mb-2">Pagos de mensualidad</h3>
          <div class="flex flex-wrap gap-2">
            <ng-container *ngFor="let item of mensualidadesDisplay">
              <div
                class="w-25 h-13 p-2 rounded shadow text-xs text-white flex flex-col justify-center items-center"
                [ngClass]="item.pagado ? 'bg-orange-400' : 'bg-gray-300 text-gray-700'">
                <ng-container *ngIf="item.pagado">
                  <div>Bs {{ item.monto }}</div>
                  <div>{{ item.fecha | date:'dd/MM/yyyy' }}</div>
                </ng-container>
                <ng-container *ngIf="!item.pagado">
                  <div>Mensualidad</div>
                  <div>Pendiente</div>
                </ng-container>
              </div>
            </ng-container>
          </div>
        </div>

      <div class="mt-6">
        <h3 class="font-semibold text-gray-700 mb-2">Pago certificado</h3>
        <div class="flex flex-wrap gap-2">
          <div
            class="w-25 h-13 p-2 rounded shadow text-xs text-white flex flex-col justify-center items-center"
            [ngClass]="certificadoDisplay?.pagado ? 'bg-orange-400' : 'bg-gray-300 text-gray-700'">
            <ng-container *ngIf="certificadoDisplay?.pagado">
              <div>Bs {{ certificadoDisplay?.monto }}</div>
              <div>{{ certificadoDisplay?.fecha | date:'dd/MM/yyyy' }}</div>
            </ng-container>
            <ng-container *ngIf="!certificadoDisplay?.pagado">
              <div>Pago</div>
              <div>Pendiente</div>
            </ng-container>
          </div>
        </div>
      </div>
    </div>

    <!-- Tipo de pago -->
    <div>
      <label class="block text-gray-700 font-semibold mb-1">Tipo de pago:</label>
      <p-dropdown
        [options]="tiposPago"
        optionLabel="label"
        optionValue="value"
        formControlName="tipoPago"
        class="w-full"
        placeholder="Seleccione tipo de pago">
      </p-dropdown>
    </div>

    <!-- Monto / Abono -->
    <div>
      <label class="block text-gray-700 font-semibold mb-1">Monto / Abono:</label>
      <input pInputText type="number" formControlName="monto" class="w-full" placeholder="Ej: 200.00" />
    </div>

    <!-- Descripción -->
    <div>
      <label class="block text-gray-700 font-semibold mb-1">Descripción (opcional):</label>
      <textarea pInputTextarea formControlName="descripcion" class="w-full" rows="3" placeholder="Opcional..."></textarea>
    </div>

    <!-- Botón enviar -->
    <div>
      <button type="submit"
              pButton
              label="Registrar Pago"
              [disabled]="pagoForm.invalid">
      </button>
    </div>

  </form>
</div>
