<div class="max-w-7xl mx-auto bg-white rounded-lg shadow-sm">
  <div class="p-6 border-b border-gray-200 flex justify-between">
    <div>
      <h1 class="text-2xl font-bold text-gray-800">Reportes</h1>
      <p class="text-gray-600 mt-1">> Reportes</p>
    </div>

    <div class="flex justify-end p-4 space-x-2">
      <button pButton icon="pi pi-file-excel" label="Descargar Excel"
              class="p-button-success"
              (click)="descargarReporteExcel()">
      </button>

      <button pButton icon="pi pi-file-pdf" label="Descargar PDF"
              class="p-button-danger"
              (click)="descargarReportePDF()">
      </button>
    </div>
  </div>

  <!-- Filtros -->
  <div class="p-6 border-b border-gray-200">
    <div class="flex justify-between items-center flex-wrap gap-3">
      <!-- Search input -->
      <div class="flex items-center gap-2">
        <p-calendar [(ngModel)]="fechaInicio" dateFormat="yy-mm-dd" placeholder="Fecha inicio"></p-calendar>
        <p-calendar [(ngModel)]="fechaFin" dateFormat="yy-mm-dd" placeholder="Fecha fin"></p-calendar>
        <button pButton icon="pi pi-search" label="Filtrar"
                (click)="filtrarPorFecha()">
        </button>
      </div>

      <!-- Filtros dropdown -->
      <div class="flex flex-wrap space-x-2">
        <button pButton icon="pi pi-filter-slash" label="Limpiar"
                class="p-button-outlined"
                (click)="limpiarFiltros()">
        </button>
      </div>
    </div>
  </div>

  <!-- Tabla -->
  <p-table #table
           [value]="pagosFiltrados"
           [showCurrentPageReport]="true"
           currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} cursos"
           styleClass="p-datatable-striped p-datatable-gridlines mt-4">
    <ng-template pTemplate="header">
      <tr>
        <th>ID pago</th>
        <th>Tipo de pago</th>
        <th>Fecha</th>
        <th>Detalle</th>
        <th>Tipo descuento</th>
        <th>Monto</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-curso let-i="rowIndex">
      <tr>
        <td>{{ curso.id}}</td>
        <td>
    <span
      [ngClass]="{
         'bg-green-100 text-green-800': curso.categoria === 'INGRESO',
          'bg-red-100 text-red-800': curso.categoria === 'EGRESO',
         'bg-blue-100 text-blue-800': curso.categoria === 'MENSUALIDAD',
          'bg-yellow-100 text-yellow-800': curso.categoria === 'TOTAL',
         'bg-purple-100 text-purple-800': curso.categoria === 'CERTIFICADO',
         'bg-pink-100 text-pink-800': curso.categoria === 'RECURSAMIENTO'
        }"
      class="px-2.5 py-0.5 rounded-full text-xs font-medium"
    >
       {{ curso.categoria | titlecase }}
      </span>
        </td>
        <td>{{ curso.fechaPago }}</td>
        <td>{{ curso.detalle ? curso.detalle : 'Sin detalle' }}</td>
        <td>{{ curso.tipoDescuento }}</td>

        <td>{{ curso.monto| currency:'BS. '  }}</td>
      </tr>
    </ng-template>

    <!-- Pie de tabla con total -->
    <ng-template pTemplate="footer">
      <tr>
        <td colspan="5" class="text-right font-bold">Total:</td>
        <td class="font-bold">{{ totalMonto | currency:'BS. ' }}</td>
      </tr>
    </ng-template>
  </p-table>
</div>
